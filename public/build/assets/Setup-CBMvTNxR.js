import{o as u,d as p,n as c,a as e,Q as P,r as z,p as B,b as n,u as a,t as r,f,F as C,g as U,w as x,e as y,k as F,s as D,q as l,Z as E}from"./app-D7AyYUbD.js";import{_ as w}from"./InputLabel-Dy8DuI1Z.js";import{_ as h}from"./PrimaryButton-Dbq5JFa7.js";import{_ as k}from"./TextInput-CV4WbX_u.js";import{s as g,a as L}from"./network-FnAx5Vkx.js";import{T as M}from"./TopSnackbar-DSKYgmwA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R=e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"},null,-1),Z=[R],I={__name:"CheckCircle",props:["classStyle"],setup(V){const _=V;return(b,$)=>(u(),p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:c(_.classStyle)},Z,2))}},G={class:"bg-gray-50 text-black/50 dark:bg-black dark:text-white/50"},H=e("img",{id:"background",class:"absolute -left-20 top-0 max-w-[877px]",src:"/images/background.svg"},null,-1),K={class:"relative min-h-screen flex flex-col items-center justify-center selection:bg-[#FF2D20] selection:text-white"},O={class:"relative w-full max-w-2xl px-6 lg:max-w-7xl"},Q={class:"grid grid-cols-2 items-center gap-2 py-10 lg:grid-cols-3"},J={class:"flex lg:justify-center col-span-2 items-center gap-5"},W=e("img",{class:"object-cover w-16 rounded-2xl",src:"https://fluxsd.com/images/logo.png",alt:"fluxsd.com logo"},null,-1),X={class:"font-bold text-5xl text-slate-600"},Y={class:"text-slate-500 pt-5"},ee={class:"-mx-3 flex flex-1 justify-end items-center"},te={class:"ms-3 relative"},se={class:"dropdown dropdown-end px-3 py-2 text-sm"},oe={tabindex:"0",role:"button",class:"btn btn-sm m-1 bg-slate-200 border-none hover:bg-slate-100"},le=e("svg",{class:"-me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})],-1),ae={tabindex:"0",class:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52"},ne=["href"],re={class:"flex flex-col items-center h-screen"},ie={class:"text-center"},ce={class:"steps overflow-x-auto gap-4"},de={key:0,class:"pt-5 w-72 place-content-center place-items-center"},ue={class:"font-semibold text-xl text-gray-800 leading-tight py-5"},pe={class:"mt-4"},me={class:"mt-4"},_e={class:"mt-4"},fe={class:"flex items-center justify-end mt-4"},ge={key:1,class:"pt-5 w-72 place-content-center place-items-center"},ve={class:"font-semibold text-xl text-gray-800 leading-tight py-5"},xe={class:"flex items-center justify-end mt-4"},we={key:2,class:"pt-5 w-72 place-content-center place-items-center"},he={class:"font-semibold text-xl text-gray-800 leading-tight py-5"},ke={class:"mt-4"},be={class:"flex items-center justify-end mt-4"},ye={key:3,class:"pt-5 place-content-center place-items-center"},Ve={class:"font-semibold text-xl text-gray-800 leading-tight py-5"},Ce={class:""},$e={class:"timeline timeline-vertical"},Se={class:"timeline-middle"},ze={class:"timeline-end timeline-box"},Ue={class:"text-xs"},je=e("hr",null,null,-1),qe={class:"form-control"},Ne={class:"label"},Te={class:"label-text"},Ae=e("span",{class:"label-text-alt"},"config/mk_config.ini",-1),Pe={class:"label"},Be={class:"label-text-alt"},Fe={class:"flex items-center justify-end mt-4"},De=e("footer",{class:"py-16 text-center text-sm text-black dark:text-white/70"},null,-1),He={__name:"Setup",props:["clientConfig","localIp","localPort"],setup(V){const _=P(),b=V,$="FluxSD",m=z(1),S=z("Language");_.props.languages!=null&&_.props.locale!=null&&_.props.languages[_.props.locale]!=null&&(S.value=_.props.languages[_.props.locale]);const s=B({name:"",email:"",password:"",password_confirmation:"",processing:!1,access_url:window.location.protocol+"//"+b.localIp+":"+b.localPort+"/",atz_token:"",together_token:""});var j=["name","email","access_url","atz_token","together_token"];function q(i){return i?"text-primary h-5 w-5":"h-5 w-5"}function N(i){return/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,4})$/.test(i)}function T(i){try{return new URL(i),!0}catch{return!1}}async function A(){if(s.name==""){g(l("name_notice"),"error");return}if(s.email==""){g(l("email_notice"),"error");return}if(N(s.email)==!1){g(l("The email format is incorrect"),"error");return}if(s.password==""||s.password==!1){g(l("password_notice"),"error");return}if(s.password.length<8){g(l("The password field must be at least 8 characters"),"error");return}if(s.password!=s.password_confirmation){g(l("congirm_password_error"),"error");return}if(s.access_url!=""&&T(s.access_url)==!1){g(l("Access Url format is incorrent"),"error");return}var i=new FormData;Object.entries(s).forEach(([o,v])=>{i.append(o,v)}),i.forEach((o,v)=>o),s.processing=!0;let t=await L("post","/api/setup",i);console.log(t),s.processing=!1,t!=null&&t.code==1?window.location.href="/":g(t?t.msg:"Steup failed","error")}function d(i){m.value=i}return(i,t)=>(u(),p(C,null,[n(M),n(a(E),{title:"Setup"}),e("div",G,[H,e("div",K,[e("div",O,[e("header",Q,[e("div",J,[W,e("div",X,r(a($)),1),e("div",Y,r(a(l)("apixel_short_title")),1)]),e("nav",ee,[e("div",te,[e("div",se,[e("div",oe,[f(r(S.value)+" ",1),le]),e("ul",ae,[(u(!0),p(C,null,U(i.$page.props.languages,(o,v)=>(u(),p("li",{key:"lang_"+v},[e("a",{href:"/changeLanguage?lang="+v},r(o),9,ne)]))),128))])])])])]),e("main",re,[e("div",ie,[e("ul",ce,[e("li",{onClick:t[0]||(t[0]=o=>d(1)),class:c(["step cursor-pointer",{"step-primary":m.value>=1}])},r(a(l)("Create Administrator Account")),3),e("li",{onClick:t[1]||(t[1]=o=>d(2)),class:c(["step cursor-pointer",{"step-primary":m.value>=2}])},r(a(l)("Storage and Generator")),3),e("li",{onClick:t[2]||(t[2]=o=>d(3)),class:c(["step cursor-pointer",{"step-primary":m.value>=3}])},r(a(l)("Model Token")),3),e("li",{onClick:t[3]||(t[3]=o=>d(4)),class:c(["step cursor-pointer",{"step-primary":m.value>=4}])},r(a(l)("Preview and Save")),3)])]),m.value==1?(u(),p("div",de,[e("h2",ue,r(a(l)("Create Administrator Account")),1),e("div",null,[n(w,{for:"name",value:"Name"}),n(k,{id:"name",modelValue:s.name,"onUpdate:modelValue":t[4]||(t[4]=o=>s.name=o),type:"text",class:"mt-1 block w-full",required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"])]),e("div",pe,[n(w,{for:"email",value:"Email"}),n(k,{id:"email",modelValue:s.email,"onUpdate:modelValue":t[5]||(t[5]=o=>s.email=o),type:"email",class:"mt-1 block w-full",required:"",autocomplete:"username"},null,8,["modelValue"])]),e("div",me,[n(w,{for:"password",value:"Password"}),n(k,{id:"password",modelValue:s.password,"onUpdate:modelValue":t[6]||(t[6]=o=>s.password=o),type:"password",class:"mt-1 block w-full",required:"",autocomplete:"new-password"},null,8,["modelValue"])]),e("div",_e,[n(w,{for:"password_confirmation",value:"Confirm Password"}),n(k,{id:"password_confirmation",modelValue:s.password_confirmation,"onUpdate:modelValue":t[7]||(t[7]=o=>s.password_confirmation=o),type:"password",class:"mt-1 block w-full",required:"",autocomplete:"new-password"},null,8,["modelValue"])]),e("div",fe,[n(h,{onClick:t[8]||(t[8]=o=>d(2)),class:c(["ms-4",{"opacity-25":s.processing}]),disabled:s.processing},{default:x(()=>[f(r(a(l)("Next")),1)]),_:1},8,["class","disabled"])])])):y("",!0),m.value==2?(u(),p("div",ge,[e("h2",ve,r(a(l)("Storage and Generator")),1),e("div",null,[n(w,{for:"access_url",value:a(l)("access_url")},null,8,["value"]),n(k,{id:"access_url",modelValue:s.access_url,"onUpdate:modelValue":t[9]||(t[9]=o=>s.access_url=o),type:"text",class:"mt-1 block w-full",required:"",autofocus:"",autocomplete:"access_url"},null,8,["modelValue"])]),e("div",xe,[n(h,{onClick:t[10]||(t[10]=o=>d(1)),class:c(["ms-4",{"opacity-25":s.processing}]),disabled:s.processing},{default:x(()=>[f(r(a(l)("Return")),1)]),_:1},8,["class","disabled"]),n(h,{onClick:t[11]||(t[11]=o=>d(3)),class:c(["ms-4",{"opacity-25":s.processing}]),disabled:s.processing},{default:x(()=>[f(r(a(l)("Next")),1)]),_:1},8,["class","disabled"])])])):y("",!0),m.value==3?(u(),p("div",we,[e("h2",he,r(a(l)("Model Token")),1),e("div",null,[n(w,{for:"atz_token",value:a(l)("atz_token")},null,8,["value"]),n(k,{id:"atz_token",modelValue:s.atz_token,"onUpdate:modelValue":t[12]||(t[12]=o=>s.atz_token=o),type:"text",class:"mt-1 block w-full",required:"",autofocus:"",autocomplete:"atz_token"},null,8,["modelValue"])]),e("div",ke,[n(w,{for:"together_token",value:a(l)("together_token")},null,8,["value"]),n(k,{id:"together_token",modelValue:s.together_token,"onUpdate:modelValue":t[13]||(t[13]=o=>s.together_token=o),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"together_token"},null,8,["modelValue"])]),e("div",be,[n(h,{onClick:t[14]||(t[14]=o=>d(2)),class:c(["ms-4",{"opacity-25":s.processing}]),disabled:s.processing},{default:x(()=>[f(r(a(l)("Return")),1)]),_:1},8,["class","disabled"]),n(h,{onClick:t[15]||(t[15]=o=>d(4)),class:c(["ms-4",{"opacity-25":s.processing}]),disabled:s.processing},{default:x(()=>[f(r(a(l)("Next")),1)]),_:1},8,["class","disabled"])])])):y("",!0),m.value==4?(u(),p("div",ye,[e("h2",Ve,r(a(l)("Preview and Save")),1),e("div",Ce,[e("ul",$e,[(u(!0),p(C,null,U(a(j),(o,v)=>(u(),p("li",{key:v,class:"flex gap-1 py-1 items-center"},[e("div",Se,[n(I,{classStyle:q(s[o])},null,8,["classStyle"])]),e("div",ze,r(a(l)(o)),1),e("div",Ue," - "+r(a(l)(o+"_notice")),1),je]))),128))])]),e("label",qe,[e("div",Ne,[e("span",Te,r(a(l)("Image generator config file")),1),Ae]),F(e("textarea",{class:"textarea textarea-bordered h-24",placeholder:"","onUpdate:modelValue":t[16]||(t[16]=o=>b.clientConfig=o)},`
                        `,512),[[D,b.clientConfig]]),e("div",Pe,[e("span",Be,r(a(l)("Paste this content into the file:config/mk_config.ini")),1)])]),e("div",Fe,[n(h,{onClick:t[17]||(t[17]=o=>d(3)),class:c(["ms-4",{"opacity-25":s.processing}]),disabled:s.processing},{default:x(()=>[f(r(a(l)("Return")),1)]),_:1},8,["class","disabled"]),n(h,{onClick:A,class:c(["ms-4",{"opacity-25":s.processing}]),disabled:s.processing},{default:x(()=>[f(r(a(l)("submit")),1)]),_:1},8,["class","disabled"])])])):y("",!0)]),De])])])],64))}};export{He as default};
