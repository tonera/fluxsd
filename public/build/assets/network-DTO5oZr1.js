import{Q as u,N as l}from"./app-CL0SY-bh.js";const d=u();function f(e,n="info"){var a=document.getElementById("snackbar");a.innerHTML=e;var t="show";switch(n){case"error":t="snackerror";break}a.className=t,setTimeout(function(){a.className=a.className.replace(t,"")},3e3)}function g(e){return e+="",e=e.replace(/&/g,"%26"),e=e.replace(/\=/g,"%3D"),e}function h(e){const n=[];for(let a in e)n.push(`${a}=${g(e[a])}`);return n.join("&")}async function p(e,n,a=null,t=null){let o=a;if(e==="get"&&a!==null){let r=h(a);n+="?"+r,o=null}let s=l.post,i={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",lang:d.props.locale};switch(Object.assign(i,t),e){case"post":s=l.post;break;case"put":s=l.post,o._method="put";break;case"delete":s=l.delete;break;case"get":return s=l.get,await s(n,{headers:i}).then(r=>r.data).catch(r=>null)}return await s(n,o,{headers:i}).then(r=>r.data).catch(r=>{let c={};return r.response?c={code:422,msg:r.response.data.message}:r.request?c={code:423,msg:r.message}:c={code:424,msg:r.message},c})}function y(e){e.isRandom==!0&&(e.seed=Math.floor(Math.random()*1e8+1));var n=new FormData;for(let a in e)e.hasOwnProperty(a)&&e[a]!=null&&(a=="face_enhance"&&(e[a]=e[a]?"yes":"no"),n.append(a,e[a]));return n}function b(e,n){if(!n.hasOwnProperty("engine")||n.engine==null)return"engine can not be null";let a=["engine","width","height","prompt","steps","cfg_scale","seed"];n.engine=="local"&&a.push("model_name"),n.engine=="om"&&(a.push("sampler_name"),a.push("model_name"));for(let t of a)if(!n.hasOwnProperty(t)||n[t]===null||n[t]==="")return t+" can not be null";return!0}function T(e){return new Promise(function(n,a){var t=new FileReader;t.readAsDataURL(e),t.onload=()=>{n(t.result)}})}async function _(e,n,a){var t=new FormData;Object.keys(n).forEach((s,m)=>{t.append(s,n[s])}),t.append("act",e);let o=await p("post","/api/task",t,{"Content-Type":"multipart/form-data"});o.code==1?w(o.data.task_id,a):(console.log("error:editImage()"),f(o.msg?o.msg:trans("Server error, please try again later"),"error"))}const w=(e,n)=>{console.log("listen: channel_task =",e),window.Echo.private("channel_task."+e).listen("TaskMessage",async a=>{n(a.message)})};export{p as a,y as b,b as c,_ as e,T as g,f as s};
